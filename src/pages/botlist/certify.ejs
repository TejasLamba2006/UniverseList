<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/1.1.0/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sanitize-html/1.26.0/sanitize-html.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="/multiselect.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script>
  <title>Certifying <%- bot.name %> - Universe List</title>
  <%- include("../parts/head.ejs") %>
</head>
<%- include("../parts/navbar.ejs") %>
  <div class="container">
    <h2 style="color:white;margin-top: 175px;"><b>Certify Bot</b></h2>
    <p style="color:white;font-size: 20">Fill out the form below in order to edit your bot.</p>
    <hr class="my-4"><br>

            <div class="form">
              <form action="/bots/<%= bot.id %>/edit" method="POST">
                <div class="form-group required">
                  <label for="botID">Your Bot's Application ID</label>
                  <input type="number" class="form-control" value="<%= bot.id %>" name="id"
                    placeholder="1026362109287739423" aria-describedby="botIDhelp" autocomplete="off" readonly disabled>
                  <small id="botIDhelp" class="form-text text-muted">This field is read only</small>
                </div>
                <div class="form-group required">
                  <label for="botPrefix">Prefix</label>
                  <input type="text" class="form-control" value="<%= bot.prefix %>" name="prefix" id="botPrefix"
                    placeholder="vl!" autocomplete="off" required>
                </div>
                <div class="alert alert-dismissible alert-danger" id="form-error-popup" style="display: none;"></div>
                <p style="color: #555;">By clicking submit, you agree to our <a style="color: #094cdb"
                    href="https://universe-list.xyz/terms">TOS</a> and the <a style="color: #094cdb"
                    href="https://discord.com/developers/docs/policies-and-agreements/terms-of-service">Discord
                    Developer TOS</a></p>
                <button type="submit" class="bluebtn"><i class="fa-solid fa-paper-plane"></i> Submit</button>
              </form>
            </div>
            <br><br>
  </div>
  </div>

  <script>
    const tags = [];
    $.each($("input[name='tag']:checked"), function () {
      tags.push($(this).val());
    });
    const longDesc = $('#botLongDesc');
    const longDescPreview = $('#botLongDescPreview');

    longDesc.on('change keyup paste', function () {
      const markdownRender = marked(longDesc.val());
      const sanitizedRender = sanitizeHtml(markdownRender, {
        allowedTags: ["address", "article", "aside", "footer", "header", "h1", "h2", "h3", "h4",
          "h5", "h6", "hgroup", "main", "nav", "section", "blockquote", "dd", "div",
          "dl", "dt", "figcaption", "figure", "hr", "li", "main", "ol", "p", "pre",
          "ul", "a", "abbr", "b", "bdi", "bdo", "br", "cite", "code", "data", "dfn",
          "em", "i", "kbd", "mark", "q", "rb", "rp", "rt", "rtc", "ruby", "s", "samp",
          "small", "span", "strong", "sub", "sup", "time", "u", "var", "wbr", "caption",
          "col", "colgroup", "table", "tbody", "td", "tfoot", "th", "thead", "tr", "img", "iframe", "style"],
        allowedSchemes: ['data', 'http', 'https'],
        allowedAttributes: {
          a: ['href', 'name', 'target'],
          img: ['src', 'srcset', 'alt', 'title', 'width', 'height', 'loading'],
          iframe: ['src', 'width', 'height', 'id']
        },
      });
      longDescPreview.html(sanitizedRender);
    });

    $(".custom-control-input").on('change', function () {
      const tags = [];
      $.each($("input[name='tag']:checked"), function () {
        tags.push($(this).val());
      });
      if (tags.length > 4) {
        this.checked = false;
      }
    });
    window.initiateMulti()
  </script>

  <style>
    .form-group.required label:after {
      content: " *";
      color: red;
    }

    .form-control {
      background-color: rgba(255, 255, 255, 0.743);
    }

    .desccard {
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
  </style>